'use strict';

module.exports = function(grunt) {
  require('jit-grunt')(grunt, {
    dist: 'artifact'
  })

  grunt.initConfig({
    clean: {
      coverage: 'coverage',
      dist: 'dist'
    },
    copy: {
      main: {
        files: [{
          src: [
            'index.js',
            'properties.json'
          ],
          dest: 'dist/',
          expand: true
        }]
      }
    },
    dist: {
      clean: false,
      artifact: {
        build: {
          url: process.env.BUILD_URL
        }
      }
    },
    pkg: grunt.file.readJSON('package.json')
  })

  grunt.registerTask('build', ['clean:dist', 'dist:prepare', 'copy'])
  grunt.registerTask('jenkins', ['build', 'dist:publish'])
}
